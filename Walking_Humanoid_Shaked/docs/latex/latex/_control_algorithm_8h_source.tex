\hypertarget{_control_algorithm_8h_source}{}\doxysection{Control\+Algorithm.\+h}
\label{_control_algorithm_8h_source}\index{C:/Users/Admin/Documents/GitHub/shaked\_walker/Walking\_Humanoid\_Shaked/System/ControlAlgorithm.h@{C:/Users/Admin/Documents/GitHub/shaked\_walker/Walking\_Humanoid\_Shaked/System/ControlAlgorithm.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ \_CONTROLALGORITHM\_H\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ \_CONTROLALGORITHM\_H\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}Muscle.h"{}}}
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_control_algorithm}{ControlAlgorithm}}}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00012\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{class_control_algorithm_a1f08c39570c7ba9c2344feb1f9d28a80}{ControlAlgorithm}}();}
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{class_control_algorithm}{\string~ControlAlgorithm}}();}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a004df8f6f07bd340d5cc5b3764106add}{PD\_controller}}(\textcolor{keywordtype}{string}\ dof,\ \textcolor{keywordtype}{bool}\ leading);}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a98c5df1920346d3b2029761092aceb61}{MTU\_excitation}}(Mtuname\ m\_name,vector<bool>\ gait\_state,}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{char}\ lead,\ \textcolor{keywordtype}{char}\ lat,\ \textcolor{keywordtype}{float}\ l\_til,\ \textcolor{keywordtype}{float}\ f\_norm,\ dVector\ com\_Playervel);\textcolor{comment}{//\ the\ ouput\ is\ the\ excitation\ signal\ for\ muscle\ m\_name}}
\DoxyCodeLine{00039\ \textcolor{comment}{}\ \ \ \ vector<bool>\ \mbox{\hyperlink{class_control_algorithm_a4c8d2c34d3fbe69849868ffb342f5754}{Stance\_Swing\_Detection}}(dVector\ foot,\ dVector\ com,\ \textcolor{keywordtype}{float}\ leg,\ \textcolor{keywordtype}{float}\ contact);}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a9dba7cb1e2422f27a04e4a0d5fabb55f}{SetPlayerCOMvel}}(dVector\ COMvel);}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_ab906fc5c212fe59f3c9e9c412834b2a6}{SetSagittalDistance}}(\textcolor{keywordtype}{float}\ d);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a3a3c884ba65b68537b38db1649572990}{SetCoronalDistance}}(\textcolor{keywordtype}{float}\ d1);}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_abc4f3d26f54bf34871b4c018730f375a}{SetOptimizationParam}}(\textcolor{keywordtype}{double}*\ parameters);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00067\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_ab7fbe62db28dd1d93af542f17f9a5028}{GetShoulderTargetAngles}}(\textcolor{keywordtype}{bool}\ state0,\ \textcolor{keywordtype}{char}\ lat);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_ac721ae1301fd94879bc163db786568ae}{GetGain\_Force\_Feedback}}(Mtuname\ NAME);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_adb0db1fb1b4eea7c5565e49228ac1a76}{GetGain1\_Length\_Feedback}}(Mtuname\ NAME);}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a938964913e5e24a1c17162035d9f4571}{GetGain2\_Length\_Feedback}}(Mtuname\ NAME);}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a7479cf31f33407fecff5b12711edd871}{GetGain\_PDk}}(Mtuname\ NAME);}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a88470a5b2940698087f149e58016a803}{GetGain\_PDd}}(Mtuname\ NAME);}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a7d354ab02fcd7ce317b517ab942bcc6b}{GetGain\_PDa}}(Mtuname\ NAME);}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a357efc690739c7d7eabd2076855f81a2}{GetGain\_Lead1}}(Mtuname\ NAME);}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a98fbf99176f2251e75b1e29e02d08302}{GetGain\_Lead2}}(Mtuname\ NAME);}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a9cf44c596ebfdb741565c7bdf2764294}{GetGain\_Lead3}}(Mtuname\ NAME);}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_ae571bcb97b5fa16c662cc75f99ff22a8}{GetGain\_P1}}(Mtuname\ NAME);}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a39ff0bca2d010b3b9904f59b0f5c5732}{GetGain\_P2}}(Mtuname\ NAME);}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_a87c7476c61717765682ec81424bd8e40}{GetPreStimSI}}(Mtuname\ NAME);}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_control_algorithm_aaa5ac10453966d25f0fcea38e025a740}{GetPreStimStance}}(Mtuname\ NAME);}
\DoxyCodeLine{00150\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_a741506a244a8dd15052ed59d5fb50e26}{GetGain\_HFLswing}}();}
\DoxyCodeLine{00157\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_a8026a76c9d68739b02e80de7395cc711}{GetGain\_PD}}(\textcolor{keywordtype}{string}\ dof,\ \textcolor{keywordtype}{bool}\ lead);}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_aa9321337d5c6738b00bc1e731bfb1050}{SetShoulderAngleGain}}(\textcolor{keywordtype}{float}\ gain,\ \textcolor{keywordtype}{string}\ dof);}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00169\ \ \ \ \ vector<float>\ \ \mbox{\hyperlink{class_control_algorithm_afa6d4221cab847b3987ad5f9888da9e6}{GetInitialCondition}}();}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_ac273585d2edca1b55e9a4f332d57b02b}{SetState}}(\textcolor{keywordtype}{float}\ position,\ \textcolor{keywordtype}{float}\ velocity,\ \textcolor{keywordtype}{string}\ dof);}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a5b9b141ffddc937ef0e32b14c8a12496}{SetState0}}(\textcolor{keywordtype}{float}\ position,\ \textcolor{keywordtype}{float}\ velocity,\ \textcolor{keywordtype}{string}\ dof);}
\DoxyCodeLine{00189\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_aa4d1866babd7cfc6ad814587138c3a2d}{GetState}}(\textcolor{keywordtype}{string}\ dof);}
\DoxyCodeLine{00195\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_a8ab58c9c6b124f99fba5492317d151d5}{GetState0}}(\textcolor{keywordtype}{string}\ dof);}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a2ebfac3912ebb13704508678b7d49732}{UpdateQueue}}(\textcolor{keywordtype}{string}\ muscle,\ map<\textcolor{keywordtype}{string},\ list<float>>\ \&queue,\ \textcolor{keywordtype}{float}\ value);}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{class_control_algorithm_a676ec1a2e2f053dff068977327d82adb}{MuscleName}}(Mtuname\ name,\ \textcolor{keywordtype}{char}\ lat);}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a547641e83cd3d4180401a93e521d650a}{UpdateTaskReward}}(dFloat\ COMY\_pos,\ dVector\ COM\_vel,\ \textcolor{keywordtype}{float}\ Strunk,\ \textcolor{keywordtype}{float}\ Ftrunk);}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_control_algorithm_a89ff835133f2ca526b1afd2e83854ad9}{UpdateMuscleReward}}(\textcolor{keywordtype}{float}\ value);}
\DoxyCodeLine{00226\ \ \ \ \ vector<float>\ \mbox{\hyperlink{class_control_algorithm_a4159d6c6857cfe75f443bf52085efc1a}{GetRewardValues}}();}
\DoxyCodeLine{00227\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00228\ \ \ \ \ dVector\ COMvel;}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//\ SIMBICON\ target\ angle\ parameters\ and\ values}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{float}\ cd,\ cv,\ cd1,\ cv1;}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{float}\ dz;\ \textcolor{comment}{//\ sagittal\ distance\ between\ foot\ and\ player\ com}}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{float}\ dx;\ \textcolor{comment}{//\ coronal\ distance\ between\ foot\ and\ player\ com}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{comment}{//\ arm\ params}}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{float}\ alfa,\ beta,\ gamma;}
\DoxyCodeLine{00237\ \ \ \ \ map<Mtuname,\ float>\ Gf;\textcolor{comment}{//\ gain\ force\ feedback}}
\DoxyCodeLine{00238\ \ \ \ \ map<Mtuname,\ float>\ Gf\_TA\_SOL;\textcolor{comment}{//\ gain\ force\ feedback\ fo\ TA\ depending\ on\ SOL}}
\DoxyCodeLine{00239\ \ \ \ \ map<Mtuname,\ float>\ Glg;\textcolor{comment}{//\ gain\ length\ 1\ feedback}}
\DoxyCodeLine{00240\ \ \ \ \ map<Mtuname,\ float>\ Glh;\textcolor{comment}{//\ gain\ length\ 2\ feedback}}
\DoxyCodeLine{00241\ \ \ \ \ map<Mtuname,\ float>\ GPDk;\textcolor{comment}{//\ gain\ PD\ controller\ stiffness}}
\DoxyCodeLine{00242\ \ \ \ \ map<Mtuname,\ float>\ GPDd;\textcolor{comment}{//\ gain\ PD\ controller\ damper}}
\DoxyCodeLine{00243\ \ \ \ \ map<Mtuname,\ float>\ GPDa;\textcolor{comment}{//\ gain\ PD\ controller\ angle}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ map<Mtuname,\ float>\ GP1;\ \textcolor{comment}{//\ gain\ P\ controller\ hfl\ in\ swing\ }}
\DoxyCodeLine{00246\ \ \ \ \ map<Mtuname,\ float>\ GP2;\ \textcolor{comment}{//\ gain\ P\ controller\ hfl\ in\ swing\ }}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ map<Mtuname,\ float>\ Glead1;\ \textcolor{comment}{//\ gain\ P\ controller\ hfl\ in\ swing\ }}
\DoxyCodeLine{00249\ \ \ \ \ map<Mtuname,\ float>\ Glead2;\ \textcolor{comment}{//\ gain\ P\ controller\ hfl\ in\ swing\ \ }}
\DoxyCodeLine{00250\ \ \ \ \ map<Mtuname,\ float>\ Glead3;\ \textcolor{comment}{//\ gain\ P\ controller\ hfl\ in\ swing\ \ }}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ map<Mtuname,\ float>\ PreSI;\ \ \textcolor{comment}{//map\ pre\ stimulation\ added\ /\ subtracted\ to\ during\ swing\ initiation}}
\DoxyCodeLine{00253\ \ \ \ \ map<Mtuname,\ float>\ PreSTANCE;\ \textcolor{comment}{//\ map\ pre\ stimulation\ values\ for\ vas,\ hfl,\ ham,\ glu\ during\ stance}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ map<string,list<float>>\ uf\_l;\textcolor{comment}{//\ force\ feedback}}
\DoxyCodeLine{00256\ \ \ \ \ map<string,\ list<float>>uf\_ta\_sol\_l;\textcolor{comment}{//\ force\ feedback\ for\ TA\ depending\ on\ SOL}}
\DoxyCodeLine{00257\ \ \ \ \ map<string,\ list<float>>\ ul\_l;\textcolor{comment}{//length\ feedback}}
\DoxyCodeLine{00258\ \ \ \ \ map<string,\ list<float>>\ up\_l;\textcolor{comment}{//pd\ controller\ of\ vas\ e\ hfl}}
\DoxyCodeLine{00259\ \ \ \ \ map<string,\ list<float>>\ u\_sp\_l;\textcolor{comment}{//pd\ controller\ for\ HIP\ during\ SP}}
\DoxyCodeLine{00260\ \ \ \ \ map<string,\ list<float>>\ uHIP\_s\_l;\textcolor{comment}{//pd\ controller\ for\ HIP\ during\ stance}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ map<string,\ list<float>>f\_ta\_sol\_l;\textcolor{comment}{//\ force\ values\ for\ TA\ depending\ on\ SOL}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{comment}{//\ PD\ controllers\ params}}
\DoxyCodeLine{00265\ \ \ \ \ map<string,\ float>\ G1;\ \textcolor{comment}{//\ gain\ P\ }}
\DoxyCodeLine{00266\ \ \ \ \ map<string,\ float>\ G2;\ \textcolor{comment}{//\ gain\ D\ }}
\DoxyCodeLine{00267\ \ \ \ \ map<string,\ float>\ G3;\ \textcolor{comment}{//\ gain\ target\ angle\ }}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ map<string,\ float>\ G1lead;\ \textcolor{comment}{//\ gain\ P\ for\ leading\ leg}}
\DoxyCodeLine{00270\ \ \ \ \ map<string,\ float>\ G2lead;\ \textcolor{comment}{//\ gain\ D\ \ for\ leading\ leg}}
\DoxyCodeLine{00271\ \ \ \ \ map<string,\ float>\ G3lead;\ \textcolor{comment}{//\ gain\ target\ angle\ \ for\ leading\ leg}}
\DoxyCodeLine{00273\ \textcolor{comment}{}}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ initial\ conditions}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{float}\ trunk\_a,\ head\_a,\ AlphaR,\ AlphaL,\ Beta,Gamma,\ elbow\_a,\ Vel\_initial;}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//\ State\ of\ each\ controlled\ dof}}
\DoxyCodeLine{00278\ \ \ \ \ map<string,\ float>\ State\_position;\textcolor{comment}{//\ angle}}
\DoxyCodeLine{00279\ \ \ \ \ map<string,\ float>\ State\_velocity;\textcolor{comment}{//\ velocity}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ map<string,\ float>\ State0\_position;\textcolor{comment}{//\ initial\ angle}}
\DoxyCodeLine{00282\ \ \ \ \ map<string,\ float>\ State0\_velocity;\textcolor{comment}{//\ initial\ velocity}}
\DoxyCodeLine{00284\ \textcolor{comment}{}\ \ \ \ \textcolor{keywordtype}{float}\ TaskCost;}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{float}\ TorqueMuscleCost;\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00288\ \textcolor{comment}{}\ \ \ \ \textcolor{keywordtype}{float}\ TorquePDCost;}
\DoxyCodeLine{00289\ \};}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_CONTROL\_ALGORITHM\_H\_}}

\end{DoxyCode}
